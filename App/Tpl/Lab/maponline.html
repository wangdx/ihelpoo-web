<include file="Public:header" />
<link href="__PUBLIC__/css/lab.css?id=1" media="screen" rel="stylesheet" type="text/css" />
<div class="main">
	<div class="maponline_info_div black_l f12">
		<span class="online1"></span> 在线人数 <span class="fb f14 fi blue"><?php echo $onlineUserNums ?> </span>
		<?php if (!empty($hiddenUserNums)) { ?>
			(<span class="fb f14 fi orange"><?php echo $hiddenUserNums; ?></span> 人潜水)
		<?php } ?>
	</div>
	<div class="maponline_div">
		<ul class="maponline_ul">
		<?php foreach($userOnlineObject as $user) { ?>
		<?php $domitoryListedArray[] = $user['id']; ?>
				<?php if ($domitoryLastid == $user['id']) { ?>
					<p id="<?php echo $user['uid'] ?>" class="user_show_p">
			          <a href="__ROOT__/talk/to/<?php echo $user['uid'] ?>" title="<?php echo $user['nickname'] ?> <?php echo i_grade($user['enteryear']) ?> <?php echo i_constellation($user['birthday']),i_sex($user['sex']) ?>" style="display:inline-block; position: relative; width: 50px; height: 40px">
			            <img src="<?php echo i_icon_check($user['uid'], $user['icon_url'], 's') ?>" height="30" />
			            <span class="online1" style="position: absolute; top: -7px; left: 0;"></span>
			          </a>
			        </p>
				<?php } else { ?>
					<?php echo empty($domitoryLastid) ? '' : '</div></li>'; ?>
					<li>
					<?php if ($user['type'] == "1") { ?>
						<div class="maponline_ul_dormitory"><a href="/index/mate?w=dormitory&n=<?php echo $user['id']; ?>">男生<?php echo $user['name']; ?></a></div>
						<div class="maponline_ul_dormitory_house" value="<?php echo $user['id']; ?>">
					<?php } else if ($user['type'] == "2") { ?>
						<div class="maponline_ul_dormitory"><a href="/index/mate?w=dormitory&n=<?php echo $user['id']; ?>">女生<?php echo $user['name']; ?></a></div>
						<div class="maponline_ul_dormitory_house" value="<?php echo $user['id']; ?>">
					<?php } else if ($user['type'] == "3") { ?>
						<div class="maponline_ul_dormitory"><a href="/index/mate?w=dormitory&n=<?php echo $user['id']; ?>"><?php echo $user['name']; ?></a></div>
						<div class="maponline_ul_dormitory_house" value="<?php echo $user['id']; ?>">
					<?php } else { ?>
						<div class="maponline_ul_dormitory">未知寝室楼栋</div>
						<div class="maponline_ul_dormitory_house" value="unknown"></div>
					<?php } ?>
					<p id="<?php echo $user['uid'] ?>" class="user_show_p">
			          <a href="__ROOT__/talk/to/<?php echo $user['uid'] ?>" title="<?php echo $user['nickname'] ?> <?php echo i_grade($user['enteryear']) ?> <?php echo i_constellation($user['birthday']),i_sex($user['sex']) ?>" style="display:inline-block; position: relative; width: 50px; height: 40px">
			            <img src="<?php echo i_icon_check($user['uid'], $user['icon_url'], 's') ?>" height="30" />
			            <span class="online1" style="position: absolute; top: -7px; left: 0;"></span>
			          </a>
			        </p>
		        <?php } ?>
	    <?php $domitoryLastid = $user['id']; ?>
		<?php } ?>
		</ul>
		<ul>
		<?php foreach($recordOpDormitory as $dormitory) { ?>
			<?php if (!in_array($dormitory['id'], $domitoryListedArray)) {?>
				<li>
					<?php if ($dormitory['type'] == "1") { ?>
						<a href="/index/mate?w=dormitory&n=<?php echo $dormitory['id']; ?>">男生<?php echo $dormitory['name']; ?></a>
					<?php } else if ($dormitory['type'] == "2") { ?>
						<a href="/index/mate?w=dormitory&n=<?php echo $dormitory['id']; ?>">女生<?php echo $dormitory['name']; ?></a>
					<?php } else { ?>
						<a href="/index/mate?w=dormitory&n=<?php echo $dormitory['id']; ?>"><?php echo $dormitory['name']; ?></a>
					<?php } ?>
				</li>
			<?php } ?>
		<?php } ?>
		</ul>
	</div>
</div>
<script type="text/javascript" src="__PUBLIC__/js/lab/maponline.js"></script>
<include file="Public:footer" />
